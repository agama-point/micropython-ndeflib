import undef
import ubinascii

testnfc = ubinascii.unhexlify("03FF01A29101095402656E61686F6A202101010000010C55006C696768746E696E673A4C4E55524C31445036384755524E3847484A374D52575639365836544E575634365A374354354435484832304D4656533748564D36363239394B554A463958445A5A564D33415847554E5756454B58514D4E5357464A594536523641455856433735584B4A54594543585530464E58514E38513750415856435A565552593834384B5841523057503648584E5A5047474E38583046535851434E47455458564533525856465356564552584445335845335257434E5A585936525745334356454A4E514333435834334E575645455839534E5143464E584345524756525256473652534345485843454E5745464A5843434B584333435844534E5156485536414B11011A55046C6E626974732E6C6E61746D2E6E65742F626173652F75726C11010A5402656E706F737475726C120E086C6E75726C2F776964726177616C706F7374646174615101395500626974636F696E3A626974636F696E20616464726573733F616D6F756E743D302E303030303031266D6573736167653D646F6E6174696F6EFE000000000000000000")

test_data = ubinascii.unhexlify("9101095402656E61686F6A202101010000010C55006C696768746E696E673A4C4E55524C31445036384755524E3847484A374D52575639365836544E575634365A374354354435484832304D4656533748564D36363239394B554A463958445A5A564D33415847554E5756454B58514D4E5357464A594536523641455856433735584B4A54594543585530464E58514E38513750415856435A565552593834384B5841523057503648584E5A5047474E38583046535851434E47455458564533525856465356564552584445335845335257434E5A585936525745334356454A4E514333435834334E575645455839534E5143464E584345524756525256473652534345485843454E5745464A5843434B584333435844534E5156485536414B11011A55046C6E626974732E6C6E61746D2E6E65742F626173652F75726C11010A5402656E706F737475726C120E086C6E75726C2F776964726177616C706F7374646174615101395500626974636F696E3A626974636F696E20616464726573733F616D6F756E743D302E303030303031266D6573736167653D646F6E6174696F6E")

def main():
    print("Test of uNDEF library")
    print(test_data)
    data = undef.message_decoder(test_data)
    for r in data:
        print(r)


    t = undef.text.TextRecord("Test encoder")
    u = undef.microuri.MicroUri("https://example.org")
    u2 = undef.microuri.MicroUri("https://www.example.org")
    data = undef.message_encoder([t,u,u2])
    r = b''.join(data)
    print(r)

    data = undef.message_decoder(r)
    for r in data:
        print(r)


if __name__ == "__main__":
    main()
